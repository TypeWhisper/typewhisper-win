<Window x:Class="TypeWhisper.Windows.Views.FileTranscriptionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="TypeWhisper - Datei-Transkription"
        Width="700" Height="520"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanResize"
        MinWidth="500" MinHeight="400"
        AllowDrop="True"
        Drop="OnDrop" DragOver="OnDragOver">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <DockPanel Margin="16">
        <!-- Top: File selection + Status -->
        <StackPanel DockPanel.Dock="Top" Margin="0,0,0,12">
            <Border BorderThickness="2" BorderBrush="#AAA"
                    CornerRadius="8" Padding="20" Margin="0,0,0,8"
                    Background="#F8F8F8" AllowDrop="True">
                <StackPanel HorizontalAlignment="Center">
                    <TextBlock Text="Audio-/Video-Datei hierher ziehen"
                               HorizontalAlignment="Center" FontSize="14" Foreground="#666"/>
                    <TextBlock Text="oder" HorizontalAlignment="Center" Foreground="#999" Margin="0,4"/>
                    <Button Content="Datei auswÃ¤hlen..." Click="OnSelectFile"
                            HorizontalAlignment="Center" Padding="16,6" Margin="0,4"/>
                </StackPanel>
            </Border>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding StatusText}" VerticalAlignment="Center" Foreground="Gray"/>
                <Button Grid.Column="1" Content="Abbrechen" Command="{Binding CancelCommand}"
                        Visibility="{Binding IsProcessing, Converter={StaticResource BoolToVis}}"
                        Width="80"/>
            </Grid>

            <ProgressBar IsIndeterminate="{Binding IsProcessing}" Height="4" Margin="0,6,0,0"
                         Visibility="{Binding IsProcessing, Converter={StaticResource BoolToVis}}"/>
        </StackPanel>

        <!-- Bottom: Export buttons -->
        <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="0,8,0,0"
                    Visibility="{Binding HasResult, Converter={StaticResource BoolToVis}}">
            <Button Content="Kopieren" Command="{Binding CopyToClipboardCommand}" Width="80" Margin="0,0,4,0"/>
            <Button Content="Text (.txt)" Command="{Binding ExportTextCommand}" Width="80" Margin="0,0,4,0"/>
            <Button Content="SRT" Command="{Binding ExportSrtCommand}" Width="60" Margin="0,0,4,0"/>
            <Button Content="WebVTT" Command="{Binding ExportWebVttCommand}" Width="70" Margin="0,0,4,0"/>

            <TextBlock VerticalAlignment="Center" Margin="16,0,0,0" Foreground="Gray">
                <Run Text="Sprache:"/>
                <Run Text="{Binding DetectedLanguage, Mode=OneWay}"/>
            </TextBlock>
        </StackPanel>

        <!-- Center: Result -->
        <TextBox Text="{Binding ResultText, Mode=OneWay}"
                 IsReadOnly="True" TextWrapping="Wrap" AcceptsReturn="True"
                 VerticalScrollBarVisibility="Auto"
                 FontSize="13" Padding="8"/>
    </DockPanel>
</Window>
